# kafka Note



##  kafka概述

1. 定义：kafka是一个分布式的基于发布/订阅模式的消息队列，主要应用于大数据实时处理领域

2. 同步处理和异步处理（解耦和削峰）

3. 两种模式：

   - 点对点模式（一对一，消费者主动拉取数据，消息收到后消息清除）：

     ​		队列支持存在多个消费者，但对于一个消息而言，只能有一个消费者可以消费

   - 发布订阅模式（一对多，消费者消费数据之后不会清除消息）：

     ​		消费者主动拉取（需要维护长轮询）和队列主动推送（消费者消费能力不足导致消费者崩掉，或者消费者消费能力浪费）两种方式，和点对点方式不同，发布到topic的消息会被所有订阅者消费

### Kafka架构

1. 生产者生产消息
2. kafka集群管理消息
   - kafka Cluster（集群）
   - Broker1(节点：服务器)...
   - TopicA（主题：对数据进行分类）...
   - Partition 0（分区）...
   - Leader,Follwer（备份）：消费者只找Leader，Follow只起备份作用，只有leader挂了，Follow才作为新的Leader使用
3. 消费者消费消息
   - 每一个分区只能被同一个消费者组里的某个消费者消费
4. Zookeeper注册消息
   - 帮助kafka集群存储信息
   - 帮助消费者存储消费位置信息（0.9版本之前offset存zk,0.9之后存kafka集群本地磁盘，默认7天）

